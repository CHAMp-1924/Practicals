#include <stdio.h>
#include <conio.h>
#include <stdlib.h>

#define MAX 25

/* ---------- Bubble Sort ---------- */
void bubbleSort(int x[], int n)
{
    int i, j, temp;
    for (i = 0; i < n - 1; i++) {
        for (j = 0; j < n - i - 1; j++) {
            if (x[j] > x[j + 1]) {
                temp = x[j];
                x[j] = x[j + 1];
                x[j + 1] = temp;
            }
        }
    }
}

/* ---------- Quick Sort (Lomuto) ---------- */
int array_q[MAX];

void interchange_q(int i, int j)
{
    int temp = array_q[i];
    array_q[i] = array_q[j];
    array_q[j] = temp;
}

int partition_q(int low, int high)
{
    int pivot = array_q[high];
    int i = low - 1;
    int j;
    for (j = low; j <= high - 1; j++) {
        if (array_q[j] <= pivot) {
            i++;
            interchange_q(i, j);
        }
    }
    interchange_q(i + 1, high);
    return (i + 1);
}

void quicksort_q(int low, int high)
{
    if (low < high) {
        int pivotpos = partition_q(low, high);
        quicksort_q(low, pivotpos - 1);
        quicksort_q(pivotpos + 1, high);
    }
}

/* ---------- Utility to print array ---------- */
void print_array(int a[], int n)
{
    int i;
    for (i = 0; i < n; i++)
        printf("%5d", a[i]);
    printf("\n");
}

/* ---------- Menu & main ---------- */
int menu()
{
    int ch;
    clrscr();
    printf("\n Sorting algorithms ");
    printf("\n -------------------\n");
    printf("1. Bubble Sort\n");
    printf("2. Quick Sort\n");
    printf("3. Both (run bubble then quick on a copy)\n");
    printf("4. Quit\n");
    printf("\n Enter choice: ");
    scanf("%d", &ch);
    return ch;
}

int main(void)
{
    int choice, n, i;
    int arr[MAX], arr_copy[MAX];

    do {
        choice = menu();
        if (choice == 4) break;

        clrscr();
        printf("\n Enter the number of elements (max %d): ", MAX);
        scanf("%d", &n);
        if (n <= 0 || n > MAX) {
            printf("\n Invalid size. Press a key and try again.");
            getch();
            continue;
        }

        printf("\n Enter the elements:\n");
        for (i = 0; i < n; i++)
            scanf("%d", &arr[i]);

        switch (choice) {
            case 1: /* Bubble */
                bubbleSort(arr, n);
                printf("\n Array after Bubble Sort:");
                print_array(arr, n);
                break;

            case 2: /* Quick (use array_q) */
                for (i = 0; i < n; i++) array_q[i] = arr[i];
                quicksort_q(0, n - 1);
                printf("\n Array after Quick Sort:");
                print_array(array_q, n);
                break;

            case 3: /* Both */
                /* bubble on arr */
                for (i = 0; i < n; i++) arr_copy[i] = arr[i];
                bubbleSort(arr_copy, n);
                printf("\n After Bubble Sort:");
                print_array(arr_copy, n);

                /* quick on array_q */
                for (i = 0; i < n; i++) array_q[i] = arr[i];
                quicksort_q(0, n - 1);
                printf("\n After Quick Sort:");
                print_array(array_q, n);
                break;

            default:
                printf("\n Invalid choice");
        }

        printf("\n\nPress any key to continue...");
        getch();
    } while (1);

    return 0;
}
